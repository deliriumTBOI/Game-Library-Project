# Диаграммы последовательностей (Sequence Diagrams)

В данном разделе представлены диаграммы последовательностей, которые демонстрируют взаимодействие между основными компонентами системы **Game Library** — пользователем, клиентским интерфейсом, контроллерами, сервисами и базой данных.  
Диаграммы описывают ключевые сценарии использования: авторизацию пользователя и просмотр информации об игре.

---

## 1. Авторизация пользователя (User Login to Application)

### Описание сценария

**Цель:**  
Обеспечить безопасный вход пользователя в систему для получения доступа к персонализированным функциям.

**Основные участники:**  
- **User (Пользователь)** — инициирует процесс входа.  
- **Client UI** — интерфейс, принимающий данные для входа и отображающий результаты.  
- **Auth Controller** — контроллер, отвечающий за аутентификацию.  
- **User Service** — сервис, выполняющий логику проверки учетных данных.  
- **Database** — источник хранения данных пользователя.

### Последовательность взаимодействий

1. Пользователь открывает веб-приложение.  
2. Клиентский интерфейс отображает форму входа.  
3. Пользователь вводит **email** и **пароль**.  
4. После нажатия на кнопку **Log In**, интерфейс отправляет `POST /api/auth/login` в **Auth Controller**.  
5. Контроллер вызывает метод `authenticate(email, password)` в **User Service**.  
6. Сервис запрашивает пользователя по email в базе данных.  
7. База данных возвращает данные пользователя, включая хешированный пароль.  
8. **User Service** сверяет хеш введенного пароля с хешом из базы данных.  
9. Если данные корректны, создается **JWT/Session Token**, возвращается ответ `200 OK`, и клиент сохраняет токен.  
10. В случае ошибки возвращается `401 Unauthorized` и сообщение об ошибке.

---

### Диаграмма последовательности

![User Login to Application](https://github.com/deliriumTBOI/Game-Library-Project/blob/main/Diagrams/sequence_diagram1.png)

---

## 2. Просмотр информации об игре (View Game Information)

### Описание сценария

**Цель:**  
Позволить пользователю просматривать детальную информацию об игре и связанные отзывы.

**Основные участники:**  
- **User (Пользователь)** — инициирует просмотр каталога игр.  
- **Client UI** — отправляет запросы и отображает результаты.  
- **Game Controller** — обрабатывает запросы, связанные с играми.  
- **Game Service** — выполняет бизнес-логику получения данных об играх.  
- **Review Service** — предоставляет отзывы, связанные с конкретной игрой.  
- **Database** — источник данных о играх и отзывах.

### Последовательность взаимодействий

1. Пользователь просматривает каталог игр.  
2. Клиент отправляет запрос `GET /api/games` в **Game Controller**.  
3. Контроллер вызывает `getAllGames()` в **Game Service**.  
4. **Game Service** запрашивает все игры в базе данных и возвращает `List<Game>`.  
5. Клиент получает данные и отображает каталог игр.  
6. Пользователь выбирает конкретную игру.  
7. Отправляется запрос `GET /api/games/{gameId}`.  
8. Контроллер вызывает `getGameById(gameId)` и `getReviewsForGame(gameId)` для получения данных игры и отзывов.  
9. **Game Service** и **Review Service** взаимодействуют с базой данных, возвращая соответствующие данные.  
10. Клиент получает `Game data` и `List<Review> data`, рендерит детальную страницу игры с отзывами.

---

### Диаграмма последовательности

![View Game Information](https://github.com/deliriumTBOI/Game-Library-Project/blob/main/Diagrams/sequence_diagram2.png)


---

## Вывод

Диаграммы последовательностей демонстрируют ключевые процессы взаимодействия компонентов системы:  
- **Авторизация** показывает безопасный обмен данными между пользователем, контроллером и сервисом.  
- **Просмотр информации об игре** иллюстрирует многослойное взаимодействие между контроллерами, сервисами и базой данных, обеспечивая пользователю доступ к актуальной информации.

